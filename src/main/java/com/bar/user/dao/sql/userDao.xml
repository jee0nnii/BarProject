<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper 
PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
  "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="UserDAO">
	<select id="selectDuplicateEmail" parameterType="string" resultType ="_int">
		SELECT	COUNT(USER_ID)
		FROM	BAR_USER
		WHERE	USER_EMAIL = #{email}
	</select>
	<insert id="insertUser" parameterType="UserVO">
		INSERT INTO BAR_USER (
		USER_ID
		, USER_NAME
		, USER_NICKNAME
		, USER_EMAIL
		, USER_PASSWORD
		, USER_REGIST_DATE
		, USER_BIRTHDAY
		, SALT
		, USER_SEX
		)
		VALUES (
		USER_ID_SEQ.NEXTVAL
		, #{name}
		, #{nickname}
		, #{email}
		, #{password}
		, SYSDATE
		, #{birthday}
		, #{salt}
		, #{sex}
		)
	</insert>
	<select id="selectUser" parameterType="UserVO" resultType="UserVO">
		SELECT	USER_ID
				, USER_EMAIL
				, USER_NICKNAME
				, USER_PASSWORD
				, SALT
		FROM	BAR_USER
		WHERE	USER_EMAIL = #{email}
		AND		USER_PASSWORD = #{password}
	</select>
	<select id="selectSalt" parameterType="string" resultType="string">
		SELECT	NVL(SALT,'')
		FROM	BAR_USER
		WHERE	USER_EMAIL = #{email}
	</select>
	
</mapper>