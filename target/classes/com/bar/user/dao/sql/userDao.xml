<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper 
PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
  "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="UserDAO">
	<select id="selectDuplicateEmail" parameterType="string" resultType ="_int">
		SELECT	COUNT(ID)
		FROM	BAR_USER
		WHERE	EMAIL = #{email}
	</select>
	<insert id="insertUser" parameterType="UserVO">
		INSERT INTO BAR_USER (
		ID
		, NAME
		, NICKNAME
		, EMAIL
		, PASSWORD
		, REGIST_DATE
		, BIRTHDAY
		, SALT

		)
		VALUES (
		USER_ID_SEQ.NEXTVAL
		, #{name}
		, #{nickname}
		, #{email}
		, #{password}
		, SYSDATE
		, #{birthday}
		, #{salt}
		)
	</insert>
	<select id="selectUser" parameterType="UserVO" resultType="UserVO">
		SELECT	ID
				, EMAIL
				, NICKNAME
				, PASSWORD
				, SALT
		FROM	BAR_USER
		WHERE	EMAIL = #{email}
		AND		PASSWORD = #{password}
	</select>
	<select id="selectSalt" parameterType="string" resultType="string">
		SELECT	NVL(SALT,'')
		FROM	BAR_USER
		WHERE	EMAIL = #{email}
	</select>
	
</mapper>